%----------------------------------------------------------------
%
%  File    :  survey-CSS.tex
%
%  Author  :  Rok Kogov≈°ek, TU Graz, Austria
% 
%  Created :  01 Dec 2016
% 
%  Changed :  X Dec 2016
% 
%----------------------------------------------------------------


\chapter{Cascading Style Sheets (CSS)}

\label{chap:CSS}

Knowing the usefulness of animation in web UI and the correct way of animation planing are just the fundemantals for our conceptual plans. Those still need to be implemented to get the end product and here we usually hit a wall build from the various tools, that say they can all solve our problems. Even well established people in the field have stories as such to tell. Val Head actually started with animation due to an interesting Flash workshop. Flash was at that time the de facto king in its era, however as we know, that era is already dead. Nowdays we can acomplish
all we could with Flash and more with just the core parts of the web, namely HTML, CSS and JS
\citep{head2016designing}.

\section{Do Everything You Can With CSS}

\label{sec:everythingCSS}

With Responsive web design (RWD) in our websites and animation being part of the design, see section \ref{sec:anime_dev}, it should be natural to use the guidelines of RWD also in animation planning. \citet{IAWEB} teaches us that one of the RWD guidelines is also Progressive enhancement, which is best described with words of the conceptual authors \citet{champeon2003inclusive}: {\em"Leave no one behind. . . .  accessibility is for everyone, not just the disabled"}. With CSS nowdays being a core part of the web and at the same time being the lowest web component that enables animation with RWD guidelines\footnote{Of course one can just use an animated image, e.q. a GIF with an image sequence, and just append it with HTML into the design. However, this image will become a static component of the design and will not follow RWD guidelines.}, one should always implement with CSS and HTML alone as much of the desired animation as possible. One has only to make sure the browser support for the animated attribute.

Other supporting arguments for use of CSS as the starting point for web UI animation beside responsiveness can be summarized with the the so called "Simple CSS Truths", a list of truths by \citet{palermoCSS} enhanced with the teachings of \citet{IAWEB}:

\begin{description}
\item [CSS allows for separation of concerns] -
 With CSS the form is separated from the page's HTML structure and content. Makes it easier to read, maintain and crawl the code.

\item [CSS has a captive audience] -
 Support for CSS development is huge. At the same time more and more libraries, tools and frameworks focus on improving and simplifing CSS development. 

\item [CSS is fast] - 
 External CSS speeds up HTML downlaod and loading compared to HTMLs with duplicated inline styles. Compared to JavaScript it also processes transitions and animations faster.

\item [CSS is fault-tolarent] - 
 Browser-unknown enhancements are simply ignored by the browser, while the remainder is still used and displayed.

\item [CSS is everywhere] - 
 Modern browsers embrace CSS and feature support by each can be easily found online.
\end{description}

% section everythingCSS (end)

\section{CSS Animation Declaration} % (fold)
\label{sec:declarationCSS}

As stated in section \ref{sec:anime_motion}, animation is about changing an element's attribute(s) over time. In CSS we can redefine it as a switch between CSS styles for a HTML element that happens gradually over time. It is stated that CSS animation should be done with {\em{}Animation} property(ies) and {\em{}Keyframe} rule(s). This may be the most efficient CSS way to accomplish animation, but CSS animation can also be achieved with {\em{}Transition} property(ies) and {\em{}selector} pattern(s)\citep{w3schoolAnime,w3schoolTrans}.


\subsection{Animation Property and Keframe Rule} % (fold)
\label{sub:CSS_animation_keyframe}

The prefered declaration for animation in CSS is done by setting animation properties to the element, that will change through time. This properties just define to which animation steps or keyframes the element is linked to and how the in-between-keyframe states are interpolated through time. \citet{w3schoolAnime} explains the different properties as follows:

\begin{description}
\item [animation-name:] Here the {\em{}@keyframe} rule name is used to link the rule to the element. Since CSS animation is a set of animation properties and keyframe rules, it is a neccasery property.
\item [animation-duration:] Like-wise to the name, duration of the animation is also a neccasery property, since it defaults to 0. Animation is defined as a change over a time, so with the time duration being zero, of course there is no animation. Actual working values can be either seconds (\#s) or miliseconds (\#ms), that define one cycle of the animation.
\item [animation-timing-function:] Defines the progression curve over time, that defines how the animation is interpolated. The valid values are linear, ease, ease-in, ease-out, ease-in-out, cubic-bezier(x1,y1,x2,y1) and steps(stepSize, start, end). Acording to \citet{head2016designing}, most animators have a hard time imagining the effect of functions that start with ease*. While linear and steps are simple to understand and enough for simple animations, the cubic-bezier function should be used, since it can define any desirable curve. The way the cubic-bezier function works, can be observed in figure \ref{fig:curve}.
\item [animation-delay:] Defines how many seconds or miliseconds should the animation start be delayed. The default value is 0. It is useful, when we want multiple elements be animated one after another.
\item [animation-iteration-count:] We can define with a number, how many loops of the cycle should be done or set it to infinite cycles for a non-stop replay. The default value is 1.
\item [animation-direction:] With this property we describe in which way the animation is interpolated and what happens after the 1st cycle of animation. By setting it to the default normal, set it to reset the element into the state before animation and start it again. Reverse always starts from the end keyframe and goes towaqrds the starting keyframe, while alternate will alternate between normal and reverse by the oddness of the cycle number. Another option is the self-explanatory alternate-reverse.
\item [animation-fill-mode:] Defines what happens to an unplayed element, be it after finishing the animation or during a delay wait. By the default none the element has the CSS style outside the keyframe rules. Forwards will use the style of the last keyframe, while backwards will use the style of the first keyframe. A special option is both, that uses the styles of both the start and end keyframe.
\item [animation-play-state:] It is mostly a property used for testing and with control triggers. As the property name states it is either paused or running.
\end{description}

Same as with other CSS properties animation properties can be combined into a single property, simply called animation and where the property values follow as stated:

\begin{description}
\item [animation:] name duration timing-function delay iteration-count direction fill-mode play-state;
\end{description}

\begin{figure}[tp]
\centering
\includegraphics[keepaspectratio,width=\hsize,height=\halfh]
{images/cubicBezier.png}

\caption[Cubic-bezier Function]{
With coordinates for the location of the start and end weight we can define the desired function curve for progression through time by how much each half of the function should be deformed away from a linear function \citep{head2016designing}.
\imgcredit{The image is from the book
"Designing interface animation" by \citet{head2016designing}, used under CC BY 2.0 / It is accessible at {\em{}https://www.flickr.com/photos/rosenfeldmedia/albums/72157671107313626}.
}}
\label{fig:curve}
\end{figure}

While the animation properties just link the element to the desired changes, the actual CSS changes are defined in the @keyframes rule. In the rule we can set the keyframes, that are the finishing times, when a change should end. The keyframe times are simply described with percantage from 0\% as the start keframe and 100\% as the end keyframe. To this times we simply set, which styles should be used at the appointed time. The interpolation function set in with animation property will during proccessing interpolate the undefined percantages. For a better understanding see listing \ref{list:nonmotionAnime}.


\begin{lstlisting}[
language=CSS,
label=list:BibACMIEEE,
caption={[Example of non-motion animation in CSS]%
Simple example of non-motion animation with animation property and keyframes rule. A working example can be found in code/nonmotionAnimationCSS.html.
}
]
div{
	animation: desiredName 4s linear 0s infinite alternate;
}

@keyframes desiredName {
	0%   {background-color:red;opacity: 1;transform: scale(1);}
	25%  {background-color:yellow;transform: scale(0.8);}
	50%  {background-color:blue;transform: scale(1);}
	75%  {background-color:green;transform: scale(1.5);}
	100% {background-color:red;opacity: 0.2;transform: scale(2);}
}
\end{lstlisting}
\label{list:nonmotionAnime}
% subsection CSS_animation_keyframe (end)

\subsection{Transition Property and Selector Pattern} % (fold)
\label{sub:CSS_transition}

\TODO{edit}

\begin{description}
\item [transition-property:] propertyName | all
\item [transition-duration:] 5s
\item [transition-timing-function:] linear | ease | ease-in | ease-out | ease-in-out | cubic-bezier(x1,y1,x2,y1)
\item [transition-delay:] 2s
\end{description}


\begin{lstlisting}[
language=CSS,
label=list:BibACMIEEE,
caption={[Example of non-motion transition in CSS]%
Simple example of non-motion animation with transition property and hover selector. A working example can be found in code/nonmotionTransitionCSS.html.
}
]
div{
	background-color: red;
	opacity: 1;
	transition: all 4s;
}
div:hover{
	background-color:green;
	opacity: 0.2;
	transform: scale(2);
}
\end{lstlisting}

% subsection CSS_transition (end)

% section declarationCSS (end)

\section{CSS Examples} % (fold)
\label{sec:CSS_Examples}

% section CSS_Examples (end)

\subsection{Navigation Animation} % (fold)
\label{sub:navigationCSS}

As stated in \TODO{ref section useful}, animation can help with navigation through tha page. In the examples we show two typical cases of such usage.

\TODO{\subsubsection{Hamburger Icon}} % (fold)
\label{subsub:hamburger}

\citet{vtldesign}
\citep{vtldesign}

\begin{figure}[tp]
\centering
\includegraphics[keepaspectratio,scale=0.5]{images/hamburgerVar.png}
\includegraphics[keepaspectratio,scale=0.5]{images/hamburgerMenu.png}

\caption[Hamburger Examples]{
One the left we have a screenshot of code example hamburgerVariationCSS.html, which shows some of the different ways how hamburger icons are animated. On the right side we have hamburgerMenuCSS.html, that demonstrates the showing and hiding of the menu by hovering over the hamburger icon.
\imgcredit{Screenshot taken by the authors of this survey. The code behind the pages is by using the \cite{hamburgerMenu,hamburgerVar} online snipets as a base.}
}
\label{fig:hamburger}
\end{figure}



\TODO{\subsubsection{Current menu position indicator}} % (fold)
\label{subsub:menu}

% subsection navigationCSS (end)

\subsection{Loading Animation} % (fold)
\label{sub:loadingCSS}

Another use of animation is user feedback, see \TODO{ref section useful}.

\TODO{\subsubsection{Rotating Icon}} % (fold)
\label{subsub:rotation_loader}
2D and 3D

\TODO{\subsubsection{Horizontal movement}} % (fold)
\label{subsub:menu}

dots, progress bar, pulz (wave motion)

% section loadingCSS (end)